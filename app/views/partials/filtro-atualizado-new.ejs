<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/filtro.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="slide.js"></script>

    <title> Modelo App Node </title>
</head>

<body>
    <script src="js/double-slider.js"></script>
    <script src="js/slide.js"></script>


    <section id="filtro">
    <h4 id="filtros"  name="filtros">Filtros</h4>

<section class="filter-schools" id="panel">
    <form id="filter-form" method="GET" action="/encontre-escolas">

    <section id="escolaridade" class="sec">
        <h4 id="niveis-de-ensino"> Níveis de Ensino</h4>
        <ul>
        <li><input type="checkbox" name="niveis" id="edu-inf" value="Educação Infantil" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Educação Infantil') ? 'checked' : '' %>><label for="edu-inf">Educação Infantil</label></li>
        <li><input type="checkbox" name="niveis" id="fund1" value="Ensino Fundamental I" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Ensino Fundamental I') ? 'checked' : '' %>><label for="fund1">Ensino Fundamental I</label></li>
        <li><input type="checkbox" name="niveis" id="fund2" value="Ensino Fundamental II" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Ensino Fundamental II') ? 'checked' : '' %>><label for="fund2">Ensino Fundamental II</label></li>
        <li><input type="checkbox" name="niveis" id="e-med" value="Ensino Médio" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Ensino Médio') ? 'checked' : '' %>><label for="e-med">Ensino Médio</label></li>
        <li><input type="checkbox" name="niveis" id="e-int" value="Educação Integrada" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Educação Integrada') ? 'checked' : '' %>><label for="e-int">Ensino Integrado</label></li>
        <li><input type="checkbox" name="niveis" id="e-tec" value="Cursos Técnicos" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Cursos Técnicos') ? 'checked' : '' %>><label for="e-tec">Cursos Técnicos</label></li>
        <li><input type="checkbox" name="niveis" id="cursos" value="Cursos Extracurriculares" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.niveis && searchParams.niveis.includes('Cursos Extracurriculares') ? 'checked' : '' %>><label for="cursos">Cursos Extracurriculares</label></li>
        </ul>
        </section>

    <section id="rede" class="sec">
        <h4 id="rede-escolar"> Rede</h4>
        <ul>
        <li><input type="checkbox" name="redes" id="municipal" value="Municipal" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.redes && searchParams.redes.includes('Municipal') ? 'checked' : '' %>><label for="municipal">Municipal</label></li>
        <li><input type="checkbox" name="redes" id="estadual" value="Estadual" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.redes && searchParams.redes.includes('Estadual') ? 'checked' : '' %>><label for="estadual">Estadual</label></li>
        <li><input type="checkbox" name="redes" id="fundacao" value="Fundação/Instituto" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.redes && searchParams.redes.includes('Fundação/Instituto') ? 'checked' : '' %>><label for="fundacao">Fundação/Instituto</label></li>
        <li><input type="checkbox" name="redes" id="privada" value="Privada" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.redes && searchParams.redes.includes('Privada') ? 'checked' : '' %>><label for="privada">Privada</label></li>
            <ul>


                <section class="range-slider"><h4 id="mens">Mensalidade</h6>
                    <span class="range-input">

                        <section class="range-price">
                            <label for="min">Min</label>
                            <input type="number" name="min" value="300"> <br>
                            <label for="max">Max</label>
                            <input type="number" name="max" value="700">
                          </section>


                    <input type="checkbox" name="bes" id="bes"><label for="bes">Bolsa de Estudos</label>
                </section>

            </ul>
        </ul>
    </section>

    <section id="periodo" class="sec">
        <h4 id="turno"> Turno</h4>
        <ul>
        <li><input type="checkbox" name="turnos" id="manha" value="Manhã" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.turnos && searchParams.turnos.includes('Manhã') ? 'checked' : '' %>><label for="manha">Manhã</label></li>
        <li><input type="checkbox" name="turnos" id="tarde" value="Tarde" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.turnos && searchParams.turnos.includes('Tarde') ? 'checked' : '' %>><label for="tarde">Tarde</label></li>
        <li><input type="checkbox" name="turnos" id="integral" value="Integral" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.turnos && searchParams.turnos.includes('Integral') ? 'checked' : '' %>><label for="integral">Integral</label></li>
        <li><input type="checkbox" name="turnos" id="noite" value="Noturno" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.turnos && searchParams.turnos.includes('Noturno') ? 'checked' : '' %>><label for="noite">Noturno</label></li>
        </ul>
    </section>

    <section id="outro" class="sec">
        <h4 id="outros">Outros</h4>
        <ul>
        <li><input type="checkbox" name="acessibilidade" id="ace" value="true" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.acessibilidade === 'true' ? 'checked' : '' %>><label for="ace">Acessibilidade</label></li>
        <li><input type="checkbox" name="eja" id="eja" value="true" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.eja === 'true' ? 'checked' : '' %>><label for="eja">EJA</label></li>
        <li><input type="checkbox" name="bilingue" id="bilingue" value="true" <%= typeof searchParams !== 'undefined' && searchParams && searchParams.bilingue === 'true' ? 'checked' : '' %>><label for="bilingue">Escola Bilingue</label></li>
        </ul>
    </section>

    <p><button type="submit" id="filtrar"> Filtrar </button></p>
    </form>
</section></section>


</body>
<!-- 
<script>
    
    document.getElementById("filtrar").addEventListener("click", function() {
        // Obtemos todos os checkboxes de níveis de ensino
        const nivelEnsinoCheckboxes = document.querySelectorAll('input[type="checkbox"][name="edu-inf"], input[type="checkbox"][name="fund1"], input[type="checkbox"][name="fund2"], input[type="checkbox"][name="e-med"], input[type="checkbox"][name="e-int"], input[type="checkbox"][name="e-tec"], input[type="checkbox"][name="cursos"]');
        
        // Verificamos qual checkbox está marcado
        for (let checkbox of nivelEnsinoCheckboxes) {
            if (checkbox.checked) {
                // Redireciona para a página correspondente
                switch (checkbox.name) {
                    case "edu-inf":
                        window.location.href = "/edu-infantil"; // Página Educação Infantil
                        break;
                    case "fund1":
                        window.location.href = "/ensino-fund1"; // Página Ensino Fundamental I
                        break;
                    case "fund2":
                        window.location.href = "/ensino-fund2"; // Página Ensino Fundamental II
                        break;
                    case "e-med":
                        window.location.href = "/ensino-medio"; // Página Ensino Médio
                        break;
                    case "e-int":
                        window.location.href = "/ensino-integrado"; // Página Ensino Integrado
                        break;
                    case "e-tec":
                        window.location.href = "/cursos-tecnicos"; // Página Cursos Técnicos
                        break;
                    case "cursos":
                        window.location.href = "/cursos-extracurriculares"; // Página Cursos Extracurriculares
                        break;
                }
                break; // Para sair do loop após encontrar a primeira opção marcada
            }
        }
    });

    
    // Verifica se a URL contém "mais-filtros"
    if (window.location.pathname.includes("mais-filtros")) {
        // Exibe a seção de "escolaridade"
        document.getElementById("panel").style.display = "block";
    }

</script>

</script> -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    const filtrosButton = document.getElementById('filtros');
    const filterPanel = document.getElementById('panel');
    const filterForm = document.getElementById('filter-form');
    const filtrarButton = document.getElementById('filtrar');

    // Toggle filter panel visibility
    filtrosButton.addEventListener('click', function(e) {
        e.preventDefault();
        if (filterPanel.style.display === 'none' || filterPanel.style.display === '') {
            filterPanel.style.display = 'block';
        } else {
            filterPanel.style.display = 'none';
        }
    });

    // Handle filter form submission
    filterForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(filterForm);
        const params = new URLSearchParams();

        // Add existing search parameters if any
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.forEach((value, key) => {
            if (key !== 'pagina') { // Don't include pagination
                params.append(key, value);
            }
        });

        // Add filter parameters
        const niveis = formData.getAll('niveis');
        const redes = formData.getAll('redes');
        const turnos = formData.getAll('turnos');

        niveis.forEach(nivel => params.append('niveis', nivel));
        redes.forEach(rede => params.append('redes', rede));
        turnos.forEach(turno => params.append('turnos', turno));

        // Add boolean filters
        if (formData.get('acessibilidade')) params.append('acessibilidade', 'true');
        if (formData.get('eja')) params.append('eja', 'true');
        if (formData.get('bilingue')) params.append('bilingue', 'true');

        // Redirect to filtered results
        const filterUrl = '/encontre-escolas' + (params.toString() ? '?' + params.toString() : '');
        window.location.href = filterUrl;
    });

    // Add visual feedback for filter button
    filtrarButton.addEventListener('click', function() {
        this.innerHTML = 'Filtrando...';
        this.disabled = true;
        filterForm.submit();
    });
});
</script>
