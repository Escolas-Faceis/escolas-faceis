<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/contato.css">
    <link rel="icon" type="image/png" href="/imagem/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.js"></script>
    <title>Contato - Envie uma mensagem para nossa equipe!</title>
</head>

<script>
        function notify(title, text, type, position, timeout = 5000) {
            new Notify({
                status: type,
                title: title,
                text: text,
                effect: 'fade',
                speed: 500,
                showIcon: true,
                showCloseButton: true,
                autoclose: true,
                autotimeout: timeout,
                gap: 20,
                distance: 20,
                type: 1,
                position: position
            });
        }
    </script>

<body>
    <%- include('../partials/navbar'); %>

    <header class="contato-header">
        <h1 class="contato-title">Entre em Contato</h1>
        <p class="contato-subtitle">Estamos aqui para ajudar! Envie sua mensagem ou entre em contato conosco.</p>
    </header>

    <main class="contato-main">
        <section class="contato-container">
            <section class="contato-info">
                <h2>Informações de Contato</h2>
                <p>Tem alguma dúvida, encontrou algum erro? Entre em contato conosco!</p>

                <section class="contato-methods">
                    <section class="contato-method">
                        <i class="fas fa-envelope"></i>
                        <section>
                            <h3>E-mail</h3>
                            <a href="mailto:escolasfaceis@gmail.com">escolasfaceis@gmail.com</a>
                        </section>
                    </section>

                    <!-- <section class="contato-method">
                        <i class="fas fa-graduation-cap"></i>
                        <section>
                            <h3>TCC - Trabalho de Conclusão de Curso</h3>
                            <p>Projeto desenvolvido para conclusão do curso técnico</p>
                        </section>
                    </section> -->

                    <section class="contato-method">
                        <i class="fas fa-users"></i>
                        <section>
                            <h3>Equipe Desenvolvedora</h3>
                            <p>Grupo 5 - INI3AM</p>
                        </section>
                    </section>

                    <section class="contato-method">
                        <i class="fas fa-code"></i>
                        <section>
                            <h3>Tecnologias Utilizadas</h3>
                            <p>Node.js, Express, MySQL, EJS, CSS</p>
                        </section>
                    </section>
                </section>

                <section class="contato-social">
                    <h3>Siga-nos</h3>
                    <section class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
                    </section>
                </section>
            </section>

            <section class="contato-form">
                <h2>Envie sua Mensagem</h2>
                <form id="contact-form">
                    <section class="form-group">
                        <label for="email_contato_input">Seu melhor e-mail *</label>
                        <input type="email" name="email" id="email_contato_input" placeholder="seuemail@exemplo.com" required>
                    </section>

                    <section class="form-group">
                        <label for="assunto">Assunto</label>
                        <input type="text" name="assunto" id="assunto" placeholder="Assunto da mensagem">
                    </section>

                    <section class="form-group">
                        <label for="mensagem_contato">Mensagem *</label>
                        <textarea id="mensagem_contato" name="mensagem" placeholder="Escreva sua mensagem aqui..." required></textarea>
                    </section>

                    <button type="submit" id="orange_button">
                         ENVIAR MENSAGEM
                    </button>
                </form>
            </section>
        </section>
    </main>


    
    <script>
        document.getElementById('contact-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const formData = new FormData(this);
            const data = {
                email: formData.get('email'),
                assunto: formData.get('assunto'),
                mensagem: formData.get('mensagem')
            };

            try {
                const response = await fetch('/enviar-contato', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    notify("Mensagem enviada!", "Sua mensagem foi enviada com sucesso. Entraremos em contato em breve.", "success", "center");
                    this.reset();
                } else if (result.redirect) {
                    notify("Login necessário", result.message, "warning", "center");
                    setTimeout(() => {
                        window.location.href = result.redirect;
                    }, 5000);
                } else {
                    notify("Erro ao enviar", result.message, "error", "center");
                }
            } catch (error) {
                console.error('Erro ao enviar mensagem:', error);
                notify("Erro", "Erro ao enviar mensagem. Tente novamente mais tarde.", "error", "center");
            }
        });
    </script>
</body>


    <%- include('../partials/footer'); %>

</html>
